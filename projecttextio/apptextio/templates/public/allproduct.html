{% extends 'public/base.html' %}

{% block content %}



<div class="flex flex-col w-full">
  <div class="flex  flex-1 items-start justify-start px-[5%] mt-3">
    <nav class="flex " aria-label="Breadcrumb">
      <ol class="inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse">
        <li class="inline-flex items-center">
          <a href="{% url 'homepage' %}"
            class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white">
            <svg class="w-3 h-3 me-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor"
              viewBox="0 0 20 20">
              <path
                d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z" />
            </svg>
            Home
          </a>
        </li>
        {% if no_of_products %}
        <li>
          <div class="flex items-center">
            <svg class="rtl:rotate-180 w-3 h-3 text-gray-400 mx-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
              fill="none" viewBox="0 0 6 10">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="m1 9 4-4-4-4" />
            </svg>
            <a href="{% url 'products' %}"
              class="ms-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ms-2 dark:text-gray-400 dark:hover:text-white">Products</a>
          </div>
        </li>
        {% else %}
        <li>
          <div class="flex items-center">
            <svg class="rtl:rotate-180 w-3 h-3 text-gray-400 mx-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
              fill="none" viewBox="0 0 6 10">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="m1 9 4-4-4-4" />
            </svg>
            <a href=""
              class="ms-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ms-2 dark:text-gray-400 dark:hover:text-white">Category</a>
          </div>
        </li>
        <li aria-current="page">
          <div class="flex items-center">
            <svg class="rtl:rotate-180 w-3 h-3 text-gray-400 mx-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
              fill="none" viewBox="0 0 6 10">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="m1 9 4-4-4-4" />
            </svg>
            <span class="ms-1 text-sm font-medium text-gray-500 md:ms-2 dark:text-gray-400">{{ filter_category.name }}</span>
          </div>
        </li>
        {% endif %}
        
      </ol>
    </nav>
  </div>


  <div class="w-full flex gap-3 px-10 py-5">
    <div class="w-2/12 bg-white p-3 rounded-lg border self-start">
      <div class="flex flex-col  hover:divide-y divide-slate-300 ">
        <a href="{% url 'products' %}" class="px-4 py-1 font-bold">All Products</a>
        <div class="border-0 py-2">
          <h2 class="text-md text-gray-800 border-0 font-semibold px-4 pb-1">Category</h2>
          {% for c in categories %}
          <a href="{% url 'filter' c.id %}" class="px-7 py-1 block hover:font-semibold ">{{c.name}}</a>

          {% endfor %}
        </div>

      </div>
      
    </div>
    <div class="w-10/12">

      {% if no_of_products %}
      <h1 class="pb-2">Products from {{page_obj.start_index}}-{{page_obj.end_index}} of total {{no_of_products}} products </h1>
      {% else %}
      <h1 class="pb-2">Showing {{page_obj.start_index}}-{{page_obj.end_index}} of {{numbers}} results{% if filter_category %} for "{{ filter_category.name }}"{% endif %}</h1>
      {% endif %}
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5 items-stretch ">
        {% for product in page_obj %}
        <!-- i make changes in loop for pagination. i change products to page_obj  -->
        <a href="{% url 'viewproduct' product.id %}" class="bg-slate-100 h-full rounded-lg">

          <div class=" border rounded-lg shadow-lg flex flex-col ">
            <img src="{{product.display_variant.image.url}}" class="w-full h-80 object-cover  rounded-t-lg " alt="{{product.title}}">

            <div class=" flex flex-col justify-between flex-grow">
              <h2 class="px-3 font-bold truncate " title="{{product.title}}">{{product.title}}</h2>
              <p class="px-3 font-semibold truncate  ">{{product.brand}}</p>
              
              <div class="px-3 py-1 text-md font-semibold"> Price :
                <span class="text-lg font-semibold">₹{{ product.display_variant.dis_price }}</span>
                <del class="text-md text-gray-700 ml-2">₹{{ product.display_variant.price }}</del>
              </div>
            </div>
          </div>

        </a>
        {% endfor %}
      </div>
      {% if page_obj %}
      <div class="flex justify-center mt-6 space-x-2">
        {% if page_obj.has_previous %}
        <a href="?page={{ page_obj.previous_page_number }}"
          class="px-3 py-1 bg-blue-200 rounded hover:bg-blue-400">Previous</a>
        {% endif %}

        <span class="px-3 py-1 bg-gray-300 rounded">Page {{ page_obj.number }} of
          {{page_obj.paginator.num_pages}}</span>

        {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}" class="px-3 py-1 bg-blue-200 hover:bg-blue-400 rounded">Next</a>
        {% endif %}
      </div>
      {% endif %}
    </div>
  </div>
  
  
  
  
  {% include 'public/footer.html' %}
</div>



{% endblock %}